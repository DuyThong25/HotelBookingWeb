@model IEnumerable<Hotel>

<div class="container-fluid p-0 border border-1 border-top-0 pb-5" style="margin-top:100px;">
    <div class="row text-center">
        <div class="col-md-12">
            <h1 class="my-4">Tìm khách sạn - Giá tốt nhất</h1>
            <div class="d-flex justify-content-center align-items-center">
                <div class="input-group w-50">
                    <input type="text" class="form-control" placeholder="Chọn thành phố mà bạn muốn đến">
                    <input type="text" class="form-control" id="dateRange" value="" placeholder="Chọn ngày khởi hành">
                    <div class="input-group-append">
                        <button class="btn btn-primary" type="button"><i class="bi bi-search"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container my-4">
    <h4 class="fw-bold">Lựa chọn tốt nhất</h4>
    <div class="row">
        @foreach (Hotel hotel in Model)
        {
            var location = $"Tp.{@hotel.City}, Q.{hotel.Ward}";
            var roomAvailabels = 0;
            if (hotel.Rooms != null && hotel.Rooms.Count > 0)
            {
                roomAvailabels = hotel.Rooms.Where(x => x.HotelId == @hotel.Id
                && x.Status == StaticDetail.RoomStatus_Available)
                .Count();
            }@if (roomAvailabels != 0)
            {
                <div class="col-md-3 my-3">
                    <div class="product-card">
                        <div style="height:250px;" class="d-flex justify-content-center">
                            @if (hotel.HotelImages != null && hotel.HotelImages.Count > 0)
                            {
                                <img class="img-fluid mb-3 " src="@hotel.HotelImages.FirstOrDefault().ImageUrl" />
                            }
                            else
                            {
                                <img class="img-fluid mb-3" src="~/image/no_image.jpg">
                            }
                        </div>
                        <div class="card-title fw-bold my-3">
                            <h4>@hotel.Name</h4>
                        </div>
                        <div class="my-3">
                            <span><i class="bi bi-geo-alt"></i>@location</span>
                        </div>

                        <div class="my-3 text-success">
                            <small><strong>Có @roomAvailabels phòng phù hợp</strong></small>
                        </div>

                        <div class="mt-4">
                            <a href="#" class="btn w-100 btn-outline-primary">Xem Chi Tiết</a>
                        </div>
                    </div>
                </div>
            }
        }
    </div>
</div>

@section Scripts {
    <!-- Date Range Picker JS -->
    <script src="https://cdn.jsdelivr.net/npm/moment/min/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <!-- jQuery UI JS for Autocomplete -->
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

    <script>
        $(document).ready(function () {
            $('#dateRange').daterangepicker({
                locale: {
                    format: 'DD/MM/YYYY'
                }
            });
        });

        // // Function to get cities from API
        // function getCities() {
        //     return $.get(
        //         '/provinces/getAll?limit=-1',
        //         (data) => {
        //             console.log(data)
        //         }
        //     )
        // }

        // // Initialize the autocomplete with data from the API
        // getCities().done(function (data) {
        //     var cities = data.cities; // Adjust based on your API response structure
        //     $('#cityInput').autocomplete({
        //         source: cities
        //     });
        // }).fail(function (jqXHR, textStatus, errorThrown) {
        //     console.error("Error fetching cities: ", textStatus, errorThrown);
        // });

    </script>
}